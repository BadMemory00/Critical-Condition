@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
</div>

@foreach (var item in Model.Device)
{
    double Importance = Math.Ceiling(((double)item.Function + (double)item.Area) / 2);
    double RPNPercentage = (item.RPN() * 100) / 975;


    <div class="card m-3" style="width: 20rem; display:inline-block">
        <div class="card-body">
            <div>
                <h5 class="card-title">Device Name: @item.Name</h5>
                <h6 class="card-subtitle mb-2 text-muted">Type of Service : @item.TypeOfService</h6>
            </div>
            <hr />
            <h7>Utilization Rate : @item.UtilizationRateString()</h7>
            <br />
            <h7>Unavailability : @item.UnavailabilityString()</h7>
            <br />
            <h7>Safety : @item.Safety</h7>
            <br />
            <h7>Importance : @Importance</h7>
            <br />
            <h7>Financial Score : @item.FinancialScore()</h7>
            <br />
            <h7>Detection : @item.Detection</h7>
            <br />
            <h7>Age Fator : @item.AgeFactor()</h7>
            <hr />
            <h6>RPN : @item.RPN() / 975</h6>
            @if (RPNPercentage <= 50)
            {
                <div class="progress">
                    <div class="progress-bar bg-success" style="width:@RPNPercentage%; min-width:20px">@RPNPercentage%</div>
                </div>
            }
            @if (RPNPercentage <= 75 && RPNPercentage > 50)
            {
                <div class="progress">
                    <div class="progress-bar bg-warning" style="width:@RPNPercentage%; min-width:20px">@RPNPercentage%</div>
                </div>
            }
            @if (RPNPercentage > 75)
            {
                <div class="progress">
                    <div class="progress-bar bg-danger" style="width:@RPNPercentage%; min-width:20px">@RPNPercentage%</div>
                </div>
            }
            <div class="text-right mt-1"><a asp-page="RPNCalculations" asp-route-id="@item.ID">Calculations Details</a></div>
            <hr />
            <a asp-page="CRUD/Details" asp-route-id="@item.ID" class="card-link float-left mb-3">Full Details</a>
            <a asp-page="CRUD/Edit" asp-route-id="@item.ID" class="card-link float-right">Edit Device</a>
        </div>
    </div>
}
